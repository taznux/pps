<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="generator" content="Doconce: http://code.google.com/p/doconce/"/>

    <link rel="stylesheet"
          href="https://raw.githubusercontent.com/hplgit/doconce/master/bundled/html_styles/style_vagrant/css/twitter_bootstrap.css">
    <link rel="stylesheet"
          href="https://raw.githubusercontent.com/hplgit/doconce/master/bundled/html_styles/style_vagrant/css/vagrant.css">
    <!-- Define color of headings here (last definition counts) -->
    <style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */

    </style>
</head>
<body>

<title>Using Flask for Scientific Web Applications</title>

<div class="container">
    <div class="row Header with-border">
        <div class="span3 Module logo">
            <h1><a href="/">Flask<span class="subtitle">4scientists</span></a></h1>
        </div>
        <div class="span9">
            <div class="Module navigation">
                <ul>
                    <li><a href="http://flask.pocoo.org/">Flask</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="span3 Module sidebar">
        <div class="well" style="padding: 8px 0px;">
            <ul class="nav nav-list">
                <!-- navigation toc: -->
                <li><a href="._web4sa_flask000.html#___sec0" style="font-size: 80%;">Web frameworks</a></li>
                <!-- navigation toc: -->
                <li><a href="._web4sa_flask004.html#___sec5" style="font-size: 80%;">Making a Flask application</a></li>
                <!-- navigation toc: -->
                <li><a href="#wf:vib:flask" style="font-size: 80%;">Handling multiple input variables in Flask</a></li>
                <!-- navigation toc: -->
                <li><a href="._web4sa_flask017.html#___sec56" style="font-size: 80%;">Exercises</a></li>
                <!-- navigation toc: -->
                <li><a href="._web4sa_flask017.html#___sec66" style="font-size: 80%;">Flask resources</a></li>

            </ul>
        </div>
    </div>

    <div class="span9">


        <!-- tocinfo
        {'highest level': 1,
         'sections': [('Web frameworks', 1, None, '___sec0'),
                      ('Other frameworks', 3, None, '___sec1'),
                      ('The MVC pattern', 2, None, '___sec2'),
                      ('A very simple application', 2, None, '___sec3'),
                      ('Application of the MVC pattern', 2, 'wf:hw:mvc', 'wf:hw:mvc'),
                      ('Making a Flask application', 1, None, '___sec5'),
                      ('Programming the Flask application', 2, None, '___sec6'),
                      ('The user interaction', 3, None, '___sec7'),
                      ('The Python code', 3, None, '___sec8'),
                      ('Dissection', 3, None, '___sec9'),
                      ('The template files', 3, None, '___sec10'),
                      ('Testing the application', 3, None, '___sec11'),
                      ('Equipping the input page with output results',
                       2,
                       None,
                       '___sec12'),
                      ('Splitting the app into model, view, and controller files',
                       2,
                       'wf:hw3:flask',
                       'wf:hw3:flask'),
                      ('Troubleshooting', 2, None, '___sec14'),
                      ('Address already in use', 3, None, '___sec15'),
                      ('Handling multiple input variables in Flask',
                       1,
                       'wf:vib:flask',
                       'wf:vib:flask'),
                      ('Programming the Flask application',
                       2,
                       'wf:vib1:flask:app',
                       'wf:vib1:flask:app'),
                      ('The compute part', 3, None, '___sec18'),
                      ('The model', 3, None, '___sec19'),
                      ('The view', 3, None, '___sec20'),
                      ('The HTML template', 3, None, '___sec21'),
                      ('Implementing error checking in the template',
                       2,
                       None,
                       '___sec22'),
                      ('Using style sheets', 2, None, '___sec23'),
                      ('Using LaTeX mathematics', 2, None, '___sec24'),
                      ('Rearranging the elements in the HTML template',
                       2,
                       None,
                       '___sec25'),
                      ('Bootstrap HTML style', 2, None, '___sec26'),
                      ('Custom validation',
                       2,
                       'wf:vib1:flask:validation',
                       'wf:vib1:flask:validation'),
                      ('Using Flask validators', 3, None, '___sec28'),
                      ('Tailored validation', 3, None, '___sec29'),
                      ('Tailored validation of intervals', 3, None, '___sec30'),
                      ('Demo', 3, None, '___sec31'),
                      ('Avoiding plot files',
                       2,
                       'wf:vib2:flask:nofiles',
                       'wf:vib2:flask:nofiles'),
                      ('PNG plots', 3, None, '___sec33'),
                      ('SVG plots', 3, None, '___sec34'),
                      ('Using mpld3', 3, None, '___sec35'),
                      ('Plotting with the Bokeh library',
                       2,
                       'wf:bokeh:flask',
                       'wf:bokeh:flask'),
                      ('Pandas highcharts plotting library', 3, None, '___sec37'),
                      ('Autogenerating the code',
                       2,
                       'wf:autogen:flask',
                       'wf:autogen:flask'),
                      ('Inspecting function signatures', 3, None, '___sec39'),
                      ('Generating the model', 3, None, '___sec40'),
                      ('Generating the view', 3, None, '___sec41'),
                      ('Generating the template', 3, None, '___sec42'),
                      ('Application', 3, None, '___sec43'),
                      ('User login and storage of computed results',
                       2,
                       'wf:flask:login',
                       'wf:flask:login'),
                      ('Required additional software', 3, None, '___sec45'),
                      ('The compute part', 3, None, '___sec46'),
                      ('The interfaces of the app', 3, None, '___sec47'),
                      ('The source code', 3, None, '___sec48'),
                      ('Resources', 3, None, '___sec49'),
                      ('Uploading of files', 2, 'wf:flask:upload', 'wf:flask:upload'),
                      ('Overview of the application', 3, None, '___sec51'),
                      ('The model class', 3, None, '___sec52'),
                      ('The controller file', 3, None, '___sec53'),
                      ('The compute function', 3, None, '___sec54'),
                      ('The HTML template', 3, None, '___sec55'),
                      ('Exercises', 1, None, '___sec56'),
                      ('Exercise 1: Add two numbers',
                       2,
                       'wf:exer:add2',
                       'wf:exer:add2'),
                      ('Exercise 2: Upload data file and visualize curves',
                       2,
                       'wf:exer:upload',
                       'wf:exer:upload'),
                      ('Exercise 3: Plot a user-specified formula',
                       2,
                       'wf:exer:formula',
                       'wf:exer:formula'),
                      ('Exercise 4: Visualize Taylor polynomial approximations',
                       2,
                       'wf:exer:Taylor',
                       'wf:exer:Taylor'),
                      ('Exercise 5: Extend the `gen` app',
                       2,
                       'wf:exer:gen:demo',
                       'wf:exer:gen:demo'),
                      ('Exercise 6: Make a web app with multiple apps',
                       2,
                       'wf:exer:addmul',
                       'wf:exer:addmul'),
                      ('Exercise 7: Equip the `gen` app with more data types',
                       2,
                       'wf:exer:gen:lists',
                       'wf:exer:gen:lists'),
                      ('Exercise 8: Auto-generate code from function signature',
                       2,
                       None,
                       '___sec64'),
                      ('Project 9: Interactive function exploration',
                       2,
                       'wf:exer:bokeh_UI',
                       'wf:exer:bokeh_UI'),
                      ('Flask resources', 1, None, '___sec66')]}
        end of tocinfo -->


        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});

        </script>
        <script type="text/javascript"
                src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>


        <a name="part0006"></a>
        <!-- !split -->

        <h1 id="wf:vib:flask">Handling multiple input variables in Flask</h1>

        <p>
            The scientific hello world example shows how to work with one input
            variable and one output variable. We can easily derive an extensible
            recipe for apps with a collection of input variables and some
            associated HTML code as result. Multiple input variables are listed
            in the <code>InputForm</code> class using different types for different forms
            (text field, float field, integer field, check box field for boolean
            values, etc.). The value of these variables will be available in a
            <code>form</code> object for computation. It is then a matter of setting
            up a template code where the various variables if the <code>form</code> object
            are formatted in HTML code as desired.

        <p>
            Our sample web application
            addresses the task of plotting the function \( u(t)=Ae^{-bt}\sin (wt) \) for
            \( t\in [0,T] \). The web application must have fields for the numbers \( A \),
            \( b \), \( w \), and \( T \), and a <em>Compute</em> button, as shown in Figure
            <a href="#wf:vib1:flask:fig:input">4</a>. Filling in values, say \( 0.1 \) for \( b \) and
            \( 20 \) for \( T \), results in what we see in Figure <a href="#wf:vib1:flask:fig:result">5</a>,
            i.e., a plot of \( u(t) \) is added after the input fields and the <em>Compute</em>
            button.

        <p>
            <center> <!-- figure -->
                <hr class="figure">
                <center>
        <p class="caption">Figure 4: The input page.
        <div id="wf:vib1:flask:fig:input"></div>
        </p></center>
        <p><img src="fig-web4sa/vib1_flask_input.png" align="bottom" width=500></p>
        </center>

        <p>
            <center> <!-- figure -->
                <hr class="figure">
                <center>
        <p class="caption">Figure 5: The result page.
        <div id="wf:vib1:flask:fig:result"></div>
        </p></center>
        <p><img src="fig-web4sa/vib1_flask_output.png" align="bottom" width=700></p>
        </center>

        <p>
            We shall make a series of different versions of this app:

        <ol>
            <li><code>vib1</code> for the basic set-up and illustration of tailoring the HTML code.</li>
            <li><code>vib2</code> for custom validation of input, governed by the programmer,
                and inlined graphics in the HTML code.
            </li>
            <li><code>vib3</code> for interactive Bokeh plots.</li>
            <li><code>gen</code> for automatic generation of the Flask app (!).</li>
            <li><code>login</code> for storing computed results in user accounts.</li>
            <li><code>upload</code> for uploading files to a web app.</li>
        </ol>

        <h2 id="wf:vib1:flask:app">Programming the Flask application</h2>

        <p>
            The forthcoming text explains the necessary steps to realize a
            Flask app that behaves as depicted in Figures <a href="#wf:vib1:flask:fig:input">4</a>
            and <a href="#wf:vib1:flask:fig:result">5</a>. We start with the
            <code>compute.py</code> module since it contains only the computation of \( u(t) \)
            and the making of the plot, without any interaction with Flask.

        <p>
            The files associated with this app are found in the <a
                href="https://github.com/hplgit/web4sciapps/tree/master/doc/src/web4sa/src-web4sa/apps/flask_apps/vib1"
                target="_self"><tt>vib1</tt></a> directory.

        <h3 id="___sec18">The compute part </h3>

        <p>
            More specifically, inside <code>compute.py</code>, we have a function for
            evaluating \( u(t) \) and a <code>compute</code> function for making the plot. The
            return value of the latter is the name of the plot file, which should
            get a unique name every time the <code>compute</code> function is called such
            that the browser cannot reuse an already cached image when displaying
            the plot. Flask
            applications must have all extra files (CSS, images, etc.) in a
            subdirectory <code>static</code>.

        <p>

            <!-- code=python (!bc pypro) typeset with pygments style "default" -->
        <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span
                style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">numpy</span> <span
                style="color: #008000; font-weight: bold">import</span> exp, cos, linspace
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">matplotlib.pyplot</span> <span
                    style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">plt</span>
<span style="color: #008000; font-weight: bold">import</span> <span
                    style="color: #0000FF; font-weight: bold">os</span><span style="color: #666666">,</span> <span
                    style="color: #0000FF; font-weight: bold">time</span><span style="color: #666666">,</span> <span
                    style="color: #0000FF; font-weight: bold">glob</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">damped_vibrations</span>(t, A, b, w):
    <span style="color: #008000; font-weight: bold">return</span> A<span style="color: #666666">*</span>exp(<span
                    style="color: #666666">-</span>b<span style="color: #666666">*</span>t)<span style="color: #666666">*</span>cos(w<span
                    style="color: #666666">*</span>t)

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">compute</span>(A, b, w, T, resolution<span
                    style="color: #666666">=500</span>):
    <span style="color: #BA2121; font-style: italic">&quot;&quot;&quot;Return filename of plot of the damped_vibration function.&quot;&quot;&quot;</span>
    t <span style="color: #666666">=</span> linspace(<span style="color: #666666">0</span>, T, resolution<span
                    style="color: #666666">+1</span>)
    u <span style="color: #666666">=</span> damped_vibrations(t, A, b, w)
    plt<span style="color: #666666">.</span>figure()  <span style="color: #408080; font-style: italic"># needed to avoid adding curves in plot</span>
    plt<span style="color: #666666">.</span>plot(t, u)
    plt<span style="color: #666666">.</span>title(<span style="color: #BA2121">&#39;A=</span><span
                    style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121">, b=</span><span
                    style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121">, w=</span><span
                    style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121">&#39;</span> <span
                    style="color: #666666">%</span> (A, b, w))
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> os<span
                    style="color: #666666">.</span>path<span style="color: #666666">.</span>isdir(<span
                    style="color: #BA2121">&#39;static&#39;</span>):
        os<span style="color: #666666">.</span>mkdir(<span style="color: #BA2121">&#39;static&#39;</span>)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #408080; font-style: italic"># Remove old plot files</span>
        <span style="color: #008000; font-weight: bold">for</span> filename <span
                    style="color: #AA22FF; font-weight: bold">in</span> glob<span style="color: #666666">.</span>glob(os<span
                    style="color: #666666">.</span>path<span style="color: #666666">.</span>join(<span
                    style="color: #BA2121">&#39;static&#39;</span>, <span style="color: #BA2121">&#39;*.png&#39;</span>)):
            os<span style="color: #666666">.</span>remove(filename)
    <span style="color: #408080; font-style: italic"># Use time since Jan 1, 1970 in filename in order make</span>
    <span style="color: #408080; font-style: italic"># a unique filename that the browser has not chached</span>
    plotfile <span style="color: #666666">=</span> os<span style="color: #666666">.</span>path<span
                    style="color: #666666">.</span>join(<span style="color: #BA2121">&#39;static&#39;</span>, <span
                    style="color: #008000">str</span>(time<span style="color: #666666">.</span>time()) <span
                    style="color: #666666">+</span> <span style="color: #BA2121">&#39;.png&#39;</span>)
    plt<span style="color: #666666">.</span>savefig(plotfile)
    <span style="color: #008000; font-weight: bold">return</span> plotfile

<span style="color: #008000; font-weight: bold">if</span> __name__ <span style="color: #666666">==</span> <span
                    style="color: #BA2121">&#39;__main__&#39;</span>:
    <span style="color: #008000; font-weight: bold">print</span> compute(<span style="color: #666666">1</span>, <span
                    style="color: #666666">0.1</span>, <span style="color: #666666">1</span>, <span
                    style="color: #666666">20</span>)
</pre>
        </div>
        <p>
        <div class="alert alert-block alert-danger alert-text-normal"><b>Avoid file writing.</b>
            It is in general not a good idea to write plots to file or let a
            web app write to file. If this app is deployed at some web site and
            multiple users are running the app, the <code>os.remove</code> statements may remove
            plots created by all other users. However, the app is useful as a
            graphical user interface run locally on a machine.
            Later, we shall avoid writing plot files and instead
            store plots in strings and embed the strings
            in the <code>img</code> tag in the HTML code.
        </div>


        <p>
            We organize the model, view, and controller as three separate
            files, as illustrated in
            the section <a href="._web4sa_flask004.html#wf:hw3:flask">Splitting the app into model, view, and controller
            files</a>. This more complicated app involves
            more code and especially the model will soon be handy to isolate in its own
            file.

        <h3 id="___sec19">The model </h3>

        <p>
            Our first version of <code>model.py</code> reads

        <p>

            <!-- code=python (!bc pypro) typeset with pygments style "default" -->
        <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span
                style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">wtforms</span> <span
                style="color: #008000; font-weight: bold">import</span> Form, FloatField, validators
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span
                    style="color: #008000; font-weight: bold">import</span> pi

<span style="color: #008000; font-weight: bold">class</span> <span
                    style="color: #0000FF; font-weight: bold">InputForm</span>(Form):
    A <span style="color: #666666">=</span> FloatField(
        label<span style="color: #666666">=</span><span
                    style="color: #BA2121">&#39;amplitude (m)&#39;</span>, default<span
                    style="color: #666666">=1.0</span>,
        validators<span style="color: #666666">=</span>[validators<span style="color: #666666">.</span>InputRequired()])
    b <span style="color: #666666">=</span> FloatField(
        label<span style="color: #666666">=</span><span style="color: #BA2121">&#39;damping factor (kg/s)&#39;</span>, default<span
                    style="color: #666666">=0</span>,
        validators<span style="color: #666666">=</span>[validators<span style="color: #666666">.</span>InputRequired()])
    w <span style="color: #666666">=</span> FloatField(
        label<span style="color: #666666">=</span><span style="color: #BA2121">&#39;frequency (1/s)&#39;</span>, default<span
                    style="color: #666666">=2*</span>pi,
        validators<span style="color: #666666">=</span>[validators<span style="color: #666666">.</span>InputRequired()])
    T <span style="color: #666666">=</span> FloatField(
        label<span style="color: #666666">=</span><span style="color: #BA2121">&#39;time interval (s)&#39;</span>, default<span
                    style="color: #666666">=18</span>,
        validators<span style="color: #666666">=</span>[validators<span style="color: #666666">.</span>InputRequired()])
</pre>
        </div>
        <p>
            As seen, the field classes can take a <code>label</code> argument for a longer
            description, here also including the units in which the variable is
            measured. It is also possible to add a <code>description</code> argument with
            some help message. Furthermore, we include a <code>default</code> value, which
            will appear in the text field such that the user does not need to
            fill in all values.

        <h3 id="___sec20">The view </h3>

        <p>
            The view component will of course make use of templates, and we shall experiment
            with different templates. Therefore, we allow a command-line argument
            to this Flask app for choosing which template we want. The rest of
            the <code>controller.py</code> file follows much the same set up as for the scientific
            hello world app:

        <p>

            <!-- code=python (!bc pypro) typeset with pygments style "default" -->
        <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span
                style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">model</span> <span
                style="color: #008000; font-weight: bold">import</span> InputForm
<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">flask</span> <span
                    style="color: #008000; font-weight: bold">import</span> Flask, render_template, request
<span style="color: #008000; font-weight: bold">from</span> <span
                    style="color: #0000FF; font-weight: bold">compute</span> <span
                    style="color: #008000; font-weight: bold">import</span> compute

app <span style="color: #666666">=</span> Flask(__name__)

<span style="color: #AA22FF">@app.route</span>(<span style="color: #BA2121">&#39;/vib1&#39;</span>, methods<span
                    style="color: #666666">=</span>[<span style="color: #BA2121">&#39;GET&#39;</span>, <span
                    style="color: #BA2121">&#39;POST&#39;</span>])
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">index</span>():
    form <span style="color: #666666">=</span> InputForm(request<span style="color: #666666">.</span>form)
    <span style="color: #008000; font-weight: bold">if</span> request<span style="color: #666666">.</span>method <span
                    style="color: #666666">==</span> <span style="color: #BA2121">&#39;POST&#39;</span> <span
                    style="color: #AA22FF; font-weight: bold">and</span> form<span style="color: #666666">.</span>validate():
        result <span style="color: #666666">=</span> compute(form<span style="color: #666666">.</span>A<span
                    style="color: #666666">.</span>data, form<span style="color: #666666">.</span>b<span
                    style="color: #666666">.</span>data,
                         form<span style="color: #666666">.</span>w<span style="color: #666666">.</span>data, form<span
                    style="color: #666666">.</span>T<span style="color: #666666">.</span>data)
    <span style="color: #008000; font-weight: bold">else</span>:
        result <span style="color: #666666">=</span> <span style="color: #008000">None</span>

    <span style="color: #008000; font-weight: bold">return</span> render_template(<span style="color: #BA2121">&#39;view.html&#39;</span>, form<span
                    style="color: #666666">=</span>form, result<span style="color: #666666">=</span>result)

<span style="color: #008000; font-weight: bold">if</span> __name__ <span style="color: #666666">==</span> <span
                    style="color: #BA2121">&#39;__main__&#39;</span>:
    app<span style="color: #666666">.</span>run(debug<span style="color: #666666">=</span><span style="color: #008000">True</span>)
</pre>
        </div>

        <h3 id="___sec21">The HTML template </h3>

        <p>
            The details governing how the web page really looks like lie in the
            template file. Since we have several fields and want them nicely
            align in a tabular fashion, we place the field name, text areas,
            and labels inside an HTML table in our first attempt to write a
            template, <code>view_plain.html</code>:

        <p>

            <!-- code=html (!bc htmlpro) typeset with pygments style "default" -->
        <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span
                style="color: #008000; font-weight: bold">&lt;form</span> <span
                style="color: #7D9029">method=</span><span style="color: #BA2121">post</span> <span
                style="color: #7D9029">action=</span><span style="color: #BA2121">&quot;&quot;</span><span
                style="color: #008000; font-weight: bold">&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;table&gt;</span>
  {% for field in form %}
    <span style="color: #008000; font-weight: bold">&lt;tr&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;td&gt;</span>{{ field.name }}<span
                    style="color: #008000; font-weight: bold">&lt;/td&gt;&lt;td&gt;</span>{{ field }}<span
                    style="color: #008000; font-weight: bold">&lt;/td&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;td&gt;</span>{{ field.label }}<span
                    style="color: #008000; font-weight: bold">&lt;/td&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/tr&gt;</span>
  {% endfor %}
<span style="color: #008000; font-weight: bold">&lt;/table&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;p&gt;&lt;input</span> <span style="color: #7D9029">type=</span><span
                    style="color: #BA2121">submit</span> <span style="color: #7D9029">value=</span><span
                    style="color: #BA2121">Compute</span><span style="color: #008000; font-weight: bold">&gt;&lt;/form&gt;&lt;/p&gt;</span>

<span style="color: #008000; font-weight: bold">&lt;p&gt;</span>
{% if result != None %}
<span style="color: #008000; font-weight: bold">&lt;img</span> <span style="color: #7D9029">src=</span><span
                    style="color: #BA2121">&quot;{{ result }}&quot;</span> <span
                    style="color: #7D9029">width=</span><span style="color: #BA2121">&quot;500&quot;</span><span
                    style="color: #008000; font-weight: bold">&gt;</span>
{% endif %}
<span style="color: #008000; font-weight: bold">&lt;/p&gt;</span>
</pre>
        </div>
        <p>
            Observe how easy it is to iterate over the <code>form</code> object and grab data
            for each field: <code>field.name</code> is the name of the variable in the
            <code>InputForm</code> class, <code>field.label</code> is the full name with units as given
            through the <code>label</code> keyword when constructing the field object, and
            writing the field object itself generates the text area for
            input (i.e., the HTML input form). The control statements we can
            use in the template are part of the <a href="http://jinja.pocoo.org/docs/" target="_self">Jinja2</a>
            templating language. For now, the if-test, for-loop and
            output of values (<code>{{ object }}</code>) are enough to generate the HTML
            code we want.

        <p>
            Recall that the objects we need in the template, like <code>result</code> and <code>form</code>
            in the present case, are transferred to the template via keyword
            arguments to the <code>render_template</code> function. We can easily pass on
            any object in our application to the template. Debugging of the template
            is done by viewing the HTML source of the web page in the browser.

        <p>
            You are encouraged to go to the <code>vib1</code> directory,
            run <code>python controller.py</code>, and load

        <p>

            <!-- code=text typeset with pygments style "default" -->
        <div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">`http://127.0.0.1:5000/vib1`
</pre>
        </div>
        <p>
            into your web browser for testing.

        <p>
        <p>
            <!-- navigation buttons at the bottom of the page -->
        <ul class="pager">
            <li class="previous">
                <a href="._web4sa_flask005.html">&larr; Prev</a>
            </li>
            <li class="next">
                <a href="._web4sa_flask007.html">Next &rarr;</a>
            </li>
        </ul>
        <!-- ------------------- end of main content --------------- -->


    </div>

    <div class="row Footer">
        <div class="span12">
            &copy 2013; Hans Petter Langtangen and Anders E. Johansen.
            Last update: Oct 11, 2015.
        </div>
    </div>
</div>
</body>
</html>

